<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Medicare IRMAA Estimator - LifeAfterAge50</title>
</head>
<body style="background:#f5f7f7;margin:0;padding:1rem;">
<div style="font-family:sans-serif;max-width:650px;margin:auto;padding:1rem;border-radius:12px;background:#e5f3f1;border:1px solid #ccc;">
  <h2 style="color:#1c8c7d;margin-top:0;">Medicare IRMAA Estimator</h2>
  <p>Estimate your Medicare Part B & D surcharges based on income.</p>

  <label>Your MAGI (Modified AGI):<br>
    <input type="text" id="magi" placeholder="e.g., 150,000" style="width:100%;padding:0.5rem;margin:0.5rem 0;">
  </label>

  <label>Filing status:<br>
    <select id="status" style="width:100%;padding:0.5rem;margin:0.5rem 0;">
      <option value="single">Single</option>
      <option value="joint">Married Filing Jointly</option>
    </select>
  </label>

  <button onclick="calcIRMAA()" style="background:#1c8c7d;color:#fff;padding:0.6rem 1.2rem;border:none;border-radius:6px;cursor:pointer;">Calculate</button>

  <div id="result" style="margin-top:1rem;display:none;">
    <h3 style="color:#1c8c7d;">Results</h3>
    <p><strong>Part B IRMAA:</strong> <span id="b-out"></span></p>
    <p><strong>Part D IRMAA:</strong> <span id="d-out"></span></p>
    <p><strong>Total Monthly IRMAA:</strong> <span id="total"></span></p>
    <p><strong>Annual IRMAA:</strong> <span id="annual"></span></p>
    <p style="font-size:0.8rem;color:#777;margin-top:0.75rem;">Educational only. Not SSA or Medicare advice.</p>
  </div>
</div>

<script>
function fmt(n){return n.toLocaleString("en-US",{style:"currency",currency:"USD"});}
function clean(v){return parseFloat(v.replace(/,/g,""));}
document.getElementById("magi").oninput=e=>e.target.value=e.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");

function bracket(m,s){
  const bS=[0,103000,129000,161000,193000,500000];
  const bJ=[0,206000,258000,322000,386000,750000];
  const idx=(s==="single"?bS:bJ).findIndex((v,i,a)=>m>=v&&m<(a[i+1]||1e12));
  return idx;
}

function calcIRMAA(){
  const m=clean(document.getElementById("magi").value);
  const s=document.getElementById("status").value;
  if(isNaN(m)){alert("Enter valid income.");return;}

  const idx=bracket(m,s);

  const b=[0,69.90,174.70,279.50,384.30,419.30];
  const d=[0,12.90,33.30,53.80,74.20,81.00];

  const bAmt=b[idx], dAmt=d[idx];
  const total=bAmt+dAmt, annual=total*12;

  document.getElementById("b-out").textContent=fmt(bAmt);
  document.getElementById("d-out").textContent=fmt(dAmt);
  document.getElementById("total").textContent=fmt(total);
  document.getElementById("annual").textContent=fmt(annual);
  document.getElementById("result").style.display="block";
}
</script>
</body>
</html>
